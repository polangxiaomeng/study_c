# 分支与循环语句

C语言是结构化的程序设计语言

生活中的任何事情都是由顺序结构、选择结构、循环结构组成，而C语言又可以通过这些结构来解决生活中的问题，所以说C语言是结构化的程序设计语言，这些结构可以由以下语句来实现。

> 分支语句

- if
- switch

> 循环语句

- while
- for
- do while

> goto语句



## 1.什么是语句？

C语句可分为以下五类：

1. 表达式语句
2. 函数调用语句
3. 控制语句
4. 复合语句
5. 空语句

这里主要来介绍控制语句。

控制语句用于控制程序的执行流程，以实现程序的各种结构方式（C语言支持三种结构：顺序结构、选择结构、循环结构），它们由特定的语句定义符组成，C语言有九种控制语句。

可分成以下三类：

1. 条件判断语句也叫分支语句：if语句、switch语句；
2. 循环执行语句：do while语句、while语句、for语句；
3. 转向语句：break语句、goto语句、continue语句、return语句。

## 2.分支语句（选择结构）

### 2.1 if语句

```
//语法结构：
//单分支
if(表达式)
  语句；
//or
if(表达式)
	语句1；
else
	语句2；
//多分支
if(表达式1)
	语句1；
else if(表达式2)
	语句2；
else
	语句3；
```

若if后表达式成立，则语句执行；否则看之后的else if后的表达式是否成立，若成立则执行相应语句，若都不成立则执行else语句。

相应代码演示：

```
//单分支
//代码1
#include <stdio.h>

int main()
{
 int age = 0;
    scanf("%d", &age);
    if(age<18)
   {
        printf("未成年\n");
   }
}
//代码2
#include <stdio.h>
int main()
{
 int age = 0;
    scanf("%d", &age);
    if(age<18)
   {
        printf("未成年\n");
   }
    else
   {
        printf("成年\n");
   }
}
//多分支
//代码3
#include <stdio.h>
int main()
{
 int age = 0;
    scanf("%d", &age);
    if(age<18)
   {
        printf("少年\n");
   }
    else if(age>=18 && age<30)
   {
        printf("青年\n");
   }
    else if(age>=30 && age<50)
   {
     printf("中年\n");
   }
    else if(age>=50 && age<80)
   {
        printf("老年\n");
   }
    else
   {
        printf("老寿星\n");
   }
    
}
```

若表达式为真，则语句执行

在C语言中如何让表达语句真假？

> 0表示假，非0表示真

若要执行多条语句，则需要将语句内容用大括号括起来，一般我们写代码都用括号括起来就好，这是一个很好的习惯，可以提高代码的可读性，减少犯错的可能。

以上`{ }`就是一个代码块。

### 2.1.1 悬空else

**当你读了这段代码：**

```
#include <stdio.h>
int main()
{
    int a = 0;
    int b = 2;
    if(a == 1)
        if(b == 2)
            printf("hehe\n");
    else
        printf("haha\n");
    return 0;
}
```

你会认为这里会打印什么样的内容呢？

是“haha”？

不，事实上屏幕上什么都不会输出。这是为什么呢？

else只会和离它近的上一个if进行匹配，不是和与它对其的if进行匹配，这里a != 1从而第一条语句表达式不成立，也就不执行其后的if else语句，所以这里什么都不打印。

这里给我们一个启示，好的代码排版是非常重要的，我们写代码一定要有好的代码排版习惯。

**改正：**

```
//适当的使用{}可以使代码的逻辑更加清楚。
//代码风格很重要
#include <stdio.h>
int main()
{
    int a = 0;
    int b = 2;
    if(a == 1)
   {
        if(b == 2)
       {
            printf("hehe\n");
       }
   }
    else
   {
         printf("haha\n");
   }       
    return 0;
}
```

else的匹配：else是和它离得最近的if匹配的。

### 2.1.2 if书写形式对比

```
//代码1
if (condition) {
    return x;
}
return y;
//代码2
if(condition)
{
    return x;
}
else
{
  return y;
}
//代码3
int num = 1;
if(num == 5)
{
    printf("hehe\n");
}
//代码4
int num = 1;
if(5 == num)
{
    printf("hehe\n");
}
```

代码2和代码4更好，逻辑更加清晰，不容易出错。

## 2.2 switch语句

switch语句也是一种分支语句。

常常用于多分支的情况。

比如：

输入1，输出星期一

输入2，输出星期二

输入3，输出星期三

输入4，输出星期四

输入5，输出星期五

输入6，输出星期六

输入7，输出星期日

那我没写成 if...else if ...else if 的形式太复杂，那我们就得有不一样的语法形式。

这就是switch 语句。

```
switch(整型表达式)
{
   case 整形常量表达式:
    语句;
}
```

### 2.2.1 在switch语句中的 break

在switch语句中，我们没办法直接实现分支，搭配break使用才能实现真正的分支。

比如：

```
#include <stdio.h>
int main()
{
    int day = 0;
    switch(day)
   {
        case 1：
            printf("星期一\n");
            break;
        case 2:
            printf("星期二\n");
            break;
        case 3:
            printf("星期三\n");
            break;    
        case 4:
            printf("星期四\n");
            break;    
        case 5:
            printf("星期五\n");
            break;
        case 6:
            printf("星期六\n");
            break;
        case 7:
            printf("星期天\n");    
            break;
   }
    return 0;
}
```

有时候我们的需求变了：

1. 输入1-5，输出的是“weekday”;
2. 输入6-7，输出“weekend”

所以我们的代码就应该这样实现了：

```
#include <stdio.h>
//switch代码演示
int main()
{
    int day = 0;
    switch(day)
   {
        case 1：
        case 2:
        case 3:
        case 4:
        case 5:
            printf("weekday\n");
            break;
        case 6:
        case 7:
            printf("weekend\n");
            break;
   }
    return 0;
}
```

**break语句** 的实际效果是把语句列表划分为不同的分支部分。

**编程好习惯**

> 在最后一个 case 语句的后面加上一条 break语句。
>
> （之所以这么写是可以避免出现在以前的最后一个 case 语句后面忘了添加 break语句）。

### 2.2.2 default子句

如果表达的值与所有的case标签的值都不匹配怎么办？

其实也没什么，结构就是所有的语句都被跳过而已。

程序并不会终止，也不会报错，因为这种情况在C中并不认为是个错误。

但是，如果你并不想忽略不匹配所有标签的表达式的值时该怎么办呢？

你可以在语句列表中增加一条default子句，把下面的标签

default：

写在任何一个 case 标签可以出现的位置。

当 switch 表达式的值并不匹配所有 case 标签的值时，这个 default 子句后面的语句就会执行。

所以，每个switch语句中只能出现一条default子句。

但是它可以出现在语句列表的任何位置，而且语句流会像执行一个case标签一样执行default子句。

**编程好习惯**

> 在每个 switch 语句中都放一条default子句是个好习惯，甚至可以在后边再加一个 break 。

## 3.循环语句

- while
- for
- do while

### 3.1 while循环

我们已经掌握了，if语句：

```
if(条件)
     语句;
```

当条件满足的情况下，if语句后的语句执行，否则不执行。

但是这个语句只会执行一次。

由于我们发现生活中很多的实际的例子是：同一件事情我们需要完成很多次。

那我们怎么做呢？

C语言中给我们引入了： while 语句，可以实现循环。

```
//while 语法结构

while(表达式)

 循环语句;
```

while语句执行流程：

![while程序图](C:\Users\Administrator\Desktop\截图\while程序图.png)

比如我们实现：

```
#include <stdio.h>
int main()
{
 	int i = 1;
 	while(i<=10)
 	{
	 	printf("%d ", i);
	 	i = i+1;
 	}
 	return 0;
}
```

在屏幕上打印1-10的数字。

上面的代码已经帮我了解了 while 语句的基本语法，那我们再了解一下：

### 3.1.1 while语句中的break和continue

**break介绍**

```
//break 代码实例
#include <stdio.h>
int main()
{
 	int i = 1;
	while(i<=10)
	{
 		if(i == 5)
	 	break;
	 	printf("%d ", i);
	 	i = i+1;
 	}
 	return 0;
}
```

这里代码输出的结果是什么？

```
1 2 3 4
1 2 3 4 5
1 2 3 4 5 6 7 8 9 10
1 2 3 4 6 7 8 9 10
```

**总结：**

break在while循环中的作用：

> 其实在循环中只要遇到break，就停止后期的所有的循环，直接终止循环。
>
> 所以：while中的break是用于永久终止循环的。

**continue介绍**

```
//continue 代码实例1
#include <stdio.h>
int main()
{
 	int i = 1;
 	while(i<=10)
 	{
 		if(i == 5)
 		continue;
 		printf("%d ", i);
 		i = i+1;
	 }
	 return 0;
 }
```

这里代码输出的结果是什么？

```
1 2 3 4
1 2 3 4 5
1 2 3 4 5 6 7 8 9 10
1 2 3 4 6 7 8 9 10
```

```
//continue 代码实例2
#include <stdio.h>
int main()
{
 	int i = 1;
	while(i<=10)
 	{
    	i = i+1;
    	if(i == 5)
 	continue;
 	printf("%d ", i);
 	}
 	return 0;
}
```

**总结:**

continue在while循环中的作用就是：

> continue是用于终止本次循环的，也就是本次循环中continue后边的代码不会再执行，
>
> 而是直接跳转到while语句的判断部分。进行下一次循环的入口判断

再看几个代码：

```
//代码什么意思？
//代码1
#include <stdio.h>
int main()
{
 int ch = 0;
 while ((ch = getchar()) != EOF)
       putchar(ch);
    return 0;
}
这里的代码适当的修改是可以用来清理输入缓冲区的。
//代码2
#include <stdio.h>
int main()
{
    char ch = '\0';
 while ((ch = getchar()) != EOF)
 {
     if (ch < '0'|| ch > '9')
        continue;
     putchar(ch);
 }
 return 0;
}
//这个代码的作用是：只打印数字字符，跳过其他字符的。
```

代码1while如果可以改为

```
while (getchar() != '\n')
{
  	;
}
```

这样就可以通过将输入缓存区的字符读取来清理输入缓存区